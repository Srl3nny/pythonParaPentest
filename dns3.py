import socket, threading
from queue import Queue

# exemplo do livro do Daniel Moreno
dominio = "ft.unicamp.br"

q = Queue()
with open("brute.txt", "r") as file:
    while True:
        nome = file.readline().strip("\n")
        if not nome:
            break
        q.put(nome)



lock = threading.Lock()

def forca_bruta():
    while not q.empty():
        DNS = f"{q.get()}.{dominio}"
        try:
            IP = socket.gethostbyname(DNS)
            lock.acquire()
            print(f"{t.getName()} - {DNS} : {IP}")
        except socket.gaierror:
            pass
        else:
            lock.release()
        q.task_done()

for i in range(50):
    t = threading.Thread(target=forca_bruta)
    t.daemon = True
    t.start()


q.join()
print("terminado!!!")